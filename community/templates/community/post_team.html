{% extends 'community/base.html' %}
{% block main_area %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'community/css/postDetailStyle.css' %}">

    <style>
        #createPostBtn {
            background-color: #5A32FB;
            border: none;
            color: #fff;
            padding: 10px 20px;
            margin-bottom: 30px;
            cursor: pointer;
            border-radius: 8px; /* 모서리를 둥글게 만듦 */
            transition: background-color 0.3s; /* 부드러운 트랜지션 효과 추가 */
        }

        #createPostBtn:hover {
            background-color: #4525D3;
        }

        /* 버튼을 누를 때 효과 */
        #createPostBtn:active {
            background-color: #341C99; /* 클릭 시 배경 색상 변경 */
        }

        .table-container {
            max-width: 1300px;
            margin: 0 auto; /* 컨테이너를 가운데 정렬 */
        }

        /* 수평선 스타일 */
        .post-separator {
            margin: 20px 0; /* 수평선 위아래 여백 추가 */
        }

        a {
            text-decoration: none;
            color: inherit;


            * {
                margin: 0;
                padding: 0;
            }

            .wrapper {
                margin: 55px 0;
                width: 100vw;
                height: auto;
                /* background-color: aquamarine; */
                display: flex;
                justify-content: center;
            }

            .content_wrapper {
                width: 70%;
                height: 100%;
                /* background-color: hotpink; */
            }

            .title {
                width: 100%;
                height: 80px;
                /* background-color: rgb(238, 173, 125); */
                border-bottom: 2px solid black;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 30px;
                box-sizing: border-box;
            }

            .content_nav {
                margin-top: 30px;
                width: 100%;
                height: 70px;
                background-color: #e3dcff;
                display: flex;
                justify-content: space-around;
                align-items: center;

                border-top: 2px solid black;
                border-right: 2px solid black;
                border-bottom: 0;
                border-left: 2px solid black;

                box-sizing: border-box;
            }

            .content_nav a {
                color: black;
                text-decoration: none;
                font-size: 15px;
                font-weight: 600;
            }

            .content_nav button {
                width: 90px;
                height: 40px;
                background-color: #5a32fb;
                border-radius: 20px;
                border-color: rgba(255, 255, 255, 0);
            }

            .content_box {
                width: 100%;
                height: auto;
                /* background-color: wheat; */
                box-sizing: border-box;
                padding: 50px;
                border: 2px solid black;
            }

            .content_box img {
                margin-top: 30px;
                width: 80%;
                height: auto;
                margin-left: auto;
                margin-right: auto;
                display: block;
            }

        }

        * {
            margin: 0;
            padding: 0;
        }

        .wrapper {
            margin: 55px 0;
            width: 100vw;
            height: auto;
            /* background-color: aquamarine; */
            display: flex;
            justify-content: center;
        }

        .content_wrapper {
            width: 70%;
            height: 100%;
            /* background-color: hotpink; */
        }

        .title {
            width: 100%;
            height: 80px;
            /* background-color: rgb(238, 173, 125); */
            border-bottom: 2px solid black;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px;
            box-sizing: border-box;
        }

        .content_nav {
            margin-top: 30px;
            width: 100%;
            height: 70px;
            background-color: #e3dcff;
            display: flex;
            justify-content: space-around;
            align-items: center;

            border-top: 2px solid black;
            border-right: 2px solid black;
            border-bottom: 0;
            border-left: 2px solid black;

            box-sizing: border-box;
        }

        .content_nav a {
            color: black;
            text-decoration: none;
            font-size: 15px;
            font-weight: 600;
        }

        .content_nav button {
            width: 90px;
            height: 40px;
            background-color: #5a32fb;
            border-radius: 20px;
            border-color: rgba(255, 255, 255, 0);
        }

        .content_box {
            width: 100%;
            height: auto;
            /* background-color: wheat; */
            box-sizing: border-box;
            padding: 50px;
            border: 2px solid black;
        }

        .content_box img {
            margin-top: 30px;
            width: 80%;
            height: auto;
            margin-left: auto;
            margin-right: auto;
            display: block;
        }


    </style>

    <link rel="stylesheet" href="../../static/community/css/post_team.css" />

    <div class="wrapper">
        <div class="content_wrapper">
            <div class="title" style="display: inline;">
                <h3 style="font-weight: bold; margin-right: 10px;">팀모집: </h3>
                <h4>{{ post.title }}</h4>
                <br/>
            </div>
            
            <div class="content_nav">
                <a href="#">팀원모집</a>
            </div>
            
            <div class="content_box">
                {% if teams_related_to_post %}
                    <table>
                        <tbody>
                            {% for team in teams_related_to_post %}
                                <tr>
                                    <td>
                                        <a href="{% url 'community:team_detail' team.id %}">
                                            <h2>{{ team.title }}</h2>
                                            <p>{{ team.time }}</p>
                                        </a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <hr class="post-separator">
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <h3>아직 팀 게시글이 없습니다.</h3>
                {% endif %}
                
                <br/>
                
                <!-- 팀원 모집 글쓰기 버튼 인라인 스타일 -->
                <button id="createPostBtn" style="color: aliceblue; background-color: #5a32fb; box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3); border-radius: 20px; border: none; outline: none !important; width: 150px; height: 40px;" onclick="redirectToTeamPostForm()">팀원 모집 글쓰기</button>
                <!-- 팀원 모집 글쓰기 버튼 종료  -->
            </div>
        </div>
    </div>
    
    <br/>
    
    <script>
        document.getElementById('createPostBtn').addEventListener('click', function () {
            var isLoggedIn = {% if user.is_authenticated %} true {% else %} false {% endif %};
            
            if (isLoggedIn) {
                // 로그인된 경우
                var teamPostFormUrl = "{% url 'community:TeamPostForm' %}";
                window.location.href = teamPostFormUrl;
            } else {
                // 로그인되지 않은 경우
                var loginUrl = "{% url 'community:login' %}";
                window.location.href = loginUrl;
            }
        });

        document.addEventListener('DOMContentLoaded', function () {
        var createPostBtn = document.getElementById("createPostBtn");

        if (createPostBtn) {
            createPostBtn.addEventListener('click', function () {
                // 현재 페이지 URL을 LocalStorage에 저장
                localStorage.setItem('previousPageUrl', window.location.href);
            });
        }
    });
    </script>
    
{% endblock %}
